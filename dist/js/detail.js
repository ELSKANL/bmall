"use strict";require(["config"],function(){require(["jquery","template","lunbo","header","cookie"],function(i,c){new Promise(function(t,e){i("header").load("/html/component/header.html",function(){t()})}).then(function(){i.cookie.json=!0,i.cookie("user")&&(i(".list-username").html('<a href="#" class="a-username">'.concat(i.cookie("user"),"</a>")),i(".list-remove").html('<a href="html/login.html" class="a-remove">退出</a>'))}).then(function(){var t=location.search.slice(1).split("="),e={};e[t[0]]=t[1],i.ajax({url:"http://localhost/bmall/projectserver/api/detail.php",data:e,method:"post",dataType:"json",success:function(t){if(1===t.code){var e=c("detail-template",{product:t.product});i("#detail").html(e)}var o=i(".input-num").val();i(".minus").click(function(){o<=1||i(".input-num").val(--o)}),i(".add").click(function(){++o,i(".input-num").val(o)}),i(".common1").click(function(){var t={name:i(".name").text(),desc:i(".des").text(),price:i(".price").text(),img:i(".img1").text(),num:i(".input-num").val()};i.cookie.json=!0,i.cookie("cart",t,{expires:10,path:"/"})}),i(".common2").click(function(){var t=i(".input-num").val(),e=i(".price").text(),o={id:i(".img1").attr("alt"),name:i(".name").text(),desc:i(".des").text(),price:e,img:i(".img1").attr("src"),num:t,xj:e*t};i.cookie.json=!0;var c=i.cookie("cart")||[];console.log(i.cookie("cart"));var n=c.some(function(t){return t.id==o.id&&(t.num++,!0)});console.log(n),n||c.push(o),i.cookie("cart",c,{expires:10,path:"/"}),i(".cart-num").attr("class","cart-count");var a=i.cookie("cart").length;i(".cart-count").html(a)}),i(".smallImages").on("click",".img-hover",function(t){var e=t.target,o=i(e).attr("src");i(".img-change").attr("src",o)})}})}).then(function(){if(i.cookie("cart")){i(".cart-num").attr("class","cart-count");var t=i.cookie("cart").length;i(".cart-count").html(t)}}),new Promise(function(t,e){i("footer").load("/html/component/footer.html",function(){t()})})})});