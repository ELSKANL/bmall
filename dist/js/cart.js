"use strict";require(["config"],function(){require(["jquery","template","header","cookie"],function(h,c){new Promise(function(e,t){h("header").load("/html/component/header.html",function(){e()})}).then(function(){h.cookie.json=!0,h.cookie("user")&&(h(".list-username").html('<a href="#" class="a-username">'.concat(h.cookie("user"),"</a>")),h(".list-remove").html('<a href="html/login.html" class="a-remove">退出</a>'))}).then(function(){if(h.cookie.json=!0,h.cookie("cart")){h(".cart-num").attr("class","cart-count");var e=h.cookie("cart").length;h(".cart-count").html(e)}}).then(function(){h.cookie.json=!0;var e=h.cookie("cart")||[];0===e.length&&(h(".ac").attr("class","result"),h(".cinfo").attr("class","ac"),h(".bigcheck").addClass("cancel-all"));var t=c("pro-template",{products:e});console.log(t),h(".cartall").html(t)}).then(function(){h(".prolist-single").on("click",".minus",function(e){h.cookie.json=!0;var t=e.target,c=h.cookie("cart"),n=h(t).parents(".prolist-single").find(".img-id").attr("alt"),i=c.filter(function(e){return e.id==n})[0],a=h(t).parents(".prolist-single").find(".input-num");if(!(i.num<=1)){i.num--,h.cookie("cart",c,{path:"/"}),a.val(i.num);var r=i.num*i.price;h(t).parents(".prolist-single").find(".xj-price").html(r),console.log(r);h(t).parents(".prolist-single").find(".cancel ");var l=0;h(".smallcheck").each(function(){l+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var s=0;h(".cancel").each(function(){s+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var o=l-s;h(".zj").text(o)}}),h(".prolist-single").on("click",".add",function(e){h.cookie.json=!0;var t=event.target,c=h.cookie("cart"),n=h(t).parents(".prolist-single").find(".img-id").attr("alt"),i=c.filter(function(e){return e.id==n})[0],a=h(t).parents(".prolist-single").find(".input-num");i.num++,h.cookie("cart",c,{path:"/"}),a.val(i.num);var r=i.num*i.price;h(t).parents(".prolist-single").find(".xj-price").html(r);var l=0;h(".smallcheck").each(function(){l+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var s=0;h(".cancel").each(function(){s+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var o=l-s;h(".zj").text(o)})}).then(function(){h(".cartall").on("click",".del",function(e){var t=e.target;h(t).parents(".prolist-single").remove();var c=h.cookie("cart"),n=h(t).parents(".prolist-single").find(".img-id").attr("alt"),i=c.filter(function(e){return!(e.id==n)});h.cookie("cart",i,{expires:10,path:"/"}),0===h.cookie("cart").length&&(h(".ac").attr("class","result"),h(".cinfo").attr("class","ac"),h(".bigcheck").addClass("cancel-all"));var a=0;h(".smallcheck").each(function(){a+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var r=0;h(".cancel").each(function(){r+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var l=a-r;h(".zj").text(l)})}).then(function(){h(".cart").on("click",".smallcheck",function(e){console.log(666);var t=e.target;h(t).toggleClass("cancel"),h(".smallcheck").hasClass("cancel")?h(".bigcheck").addClass("cancel-all"):h(".bigcheck").removeClass("cancel-all");var c=0;h(".smallcheck").each(function(){c+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var n=0;h(".cancel").each(function(){n+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var i=c-n;h(".zj").text(i)}),h(".cart").on("click",".bigcheck",function(){h(".bigcheck").hasClass("cancel-all")?(h(".bigcheck").removeClass("cancel-all"),h(".smallcheck").removeClass("cancel")):(h(".bigcheck").addClass("cancel-all"),h(".smallcheck").addClass("cancel"));var e=0;h(".smallcheck").each(function(){e+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var t=0;h(".cancel").each(function(){t+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var c=e-t;h(".zj").text(c)})}).then(function(){var e=0;h(".smallcheck").each(function(){e+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var t=0;h(".cancel").each(function(){t+=Number(h(this).parents(".prolist-single").find(".xj-price").text())});var c=e-t;h(".zj").text(c)}),new Promise(function(e,t){h("footer").load("/html/component/footer.html",function(){e()})})})});